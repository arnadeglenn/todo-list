(()=>{"use strict";function t(){let t=new Date,e=t.getDate(),d=t.getMonth()+1;return e<10&&(e="0"+e),d<10&&(d="0"+e),`${e}/${d}/${t.getFullYear()}`}class e{constructor(t,e,d){this.listItem=t,this.date=e,this.dataIndex=d}}let d=[new e("Example To-Do","2023-10-14","0"),new e("Example To-Do 2","2023-10-15","1")];const n=document.querySelector(".list-items");let o=function(){for(let t=0;t<d.length;t++){const e=document.createElement("div");e.classList.add("list-item"),e.classList.add("full-to-do"),e.setAttribute("data-index",`${t}`),n.appendChild(e);const o=document.createElement("input");o.setAttribute("type","checkbox"),o.classList.add("checkbox"),e.appendChild(o);const i=document.createElement("div");i.classList.add("to-do-input"),i.setAttribute("data-index",`${t}`),i.innerHTML=d[t].listItem,e.appendChild(i);const a=document.createElement("div");a.classList.add("icon-box"),e.appendChild(a);const s=document.createElement("input");s.classList.add("date-input"),s.setAttribute("type","date"),s.setAttribute("data-index",`${t}`),s.value=d[t].date,a.appendChild(s);const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.classList.add("edit-svg"),c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("data-index",`${t}`),c.innerHTML="<title>pencil</title><path d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' />",a.appendChild(c);const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.classList.add("delete-svg"),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("viewBox","0 0 24 24"),l.setAttribute("data-index",`${t}`),l.innerHTML="<title>trash-can-outline</title><path d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' />",a.appendChild(l)}};const i=function(){localStorage.setItem("toDoListArr",JSON.stringify(d))},a=document.querySelector(".list-items"),s=function(){document.querySelectorAll(".edit-svg").forEach((e=>{e.addEventListener("click",(e=>{console.log("Hello"),function(e){if(e.target.classList.contains("edit-svg")){const n=e.target.getAttribute("data-index"),o=document.querySelector(`.full-to-do[data-index="${n}"]`),i=document.createElement("div");a.replaceChild(i,o),function(e,d){e.classList.add("list-item"),e.classList.add("add-to-do-modal"),e.setAttribute("data-index",`${d}`);const n=document.createElement("input");n.setAttribute("type","checkbox"),n.classList.add("checkbox"),e.appendChild(n);const o=document.createElement("input");o.classList.add("to-do-input"),o.classList.add("add-to-do-input"),o.setAttribute("type","text"),o.setAttribute("placeholder","What Do You Need to Do?"),o.setAttribute("data-index",`${d}`),e.appendChild(o);const i=document.createElement("div");i.classList.add("icon-box"),e.appendChild(i);const a=document.createElement("input");a.classList.add("date-input"),a.classList.add("add-to-do-date"),a.setAttribute("type","date"),a.setAttribute("data-index",`${d}`),a.value=t(),i.appendChild(a);const s=document.createElement("button");s.classList.add("submit-button"),s.setAttribute("type","submit"),s.setAttribute("data-index",`${d}`),s.setAttribute("id","to-do-submit"),s.innerHTML="Submit",i.appendChild(s);const c=document.createElement("button");c.classList.add("cancel-button"),c.setAttribute("type","submit"),c.setAttribute("id","to-do-cancel"),c.innerHTML="Cancel",i.appendChild(c)}(i,n),console.log(d)}}(e),console.log("Hello Again");const n=document.querySelector(".submit-button"),l=document.querySelector(".cancel-button"),u=document.querySelector(".add-to-do-modal").getAttribute("data-index");n.addEventListener("click",(t=>{!function(t){const e=document.querySelector(`.add-to-do-input[data-index="${t}"]`),n=document.querySelector(`.add-to-do-date[data-index="${t}"]`);d[t].listItem=e.value,d[t].date=n.value,d[t].dataIndex=`${t}`}(u),a.innerHTML="",i(),o(),console.log(d),s(),c()})),l.addEventListener("click",(t=>{a.innerHTML="",o(),console.log(d),s(),c()}))}))}))},c=function(){document.querySelectorAll(".delete-svg").forEach((t=>{t.addEventListener("click",(t=>{!function(t){if(t.target.classList.contains("delete-svg")){const e=t.target.getAttribute("data-index");document.querySelector(`.full-to-do[data-index="${e}"]`),console.log(e),d.splice(e,1)}}(t),a.innerHTML="",i(),o(),s(),c()}))}))},l=document.getElementById("project-addition");document.getElementById("add-project-button").addEventListener("click",(t=>{l.showModal()}));const u=document.querySelector(".add-item-js"),r=document.querySelector(".list-items");let m=d.length;u.addEventListener("click",(a=>{!function(e){const d=document.createElement("div");d.classList.add("list-item"),d.classList.add("add-to-do-modal"),d.setAttribute("data-index",`${e}`),n.appendChild(d);const o=document.createElement("input");o.setAttribute("type","checkbox"),o.classList.add("checkbox"),d.appendChild(o);const i=document.createElement("input");i.classList.add("to-do-input"),i.classList.add("add-to-do-input"),i.setAttribute("type","text"),i.setAttribute("placeholder","What Do You Need to Do?"),i.setAttribute("data-index",`${e}`),d.appendChild(i);const a=document.createElement("div");a.classList.add("icon-box"),d.appendChild(a);const s=document.createElement("input");s.classList.add("date-input"),s.classList.add("add-to-do-date"),s.setAttribute("type","date"),s.setAttribute("data-index",`${e}`),s.value=t(),a.appendChild(s);const c=document.createElement("button");c.classList.add("submit-button"),c.setAttribute("type","submit"),c.setAttribute("data-index",`${e}`),c.setAttribute("id","to-do-submit"),c.innerHTML="Submit",a.appendChild(c);const l=document.createElement("button");l.classList.add("cancel-button"),l.setAttribute("type","submit"),l.setAttribute("id","to-do-cancel"),l.innerHTML="Cancel",a.appendChild(l)}(m);const l=document.querySelector(".add-to-do-input"),u=document.querySelector(".submit-button"),p=document.querySelector(".cancel-button"),b=document.querySelector(".add-to-do-modal");l.focus(),u.addEventListener("click",(t=>{!function(t){const n=document.querySelector(`.add-to-do-input[data-index="${t}"]`),o=document.querySelector(`.add-to-do-date[data-index="${t}"]`);let i=n.value,a=o.value,s=d.length,c=new e(i,a,s);d.push(c)}(m),r.innerHTML="",o(),i(),console.log(d),s(),c()})),p.addEventListener("click",(t=>{r.removeChild(b),s(),c()}))})),window.addEventListener("load",(t=>{!function(){if("undefined"!=typeof localStorage)try{const t=localStorage.getItem("toDoListArr");null!==t&&(d=JSON.parse(t))}catch(t){d=JSON.parse(localStorage.getItem("toDoListArr"))}}(),o(),s(),c()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekMsaUJBQWlCLFFBQVNDLEtGbENkLFdBR2YsR0FGd0Qsb0JBQWpCVixhQUduQyxJQUNJLE1BQU1tRCxFQUFhbkQsYUFBYW9ELFFBQVEsZUFDckIsT0FBZkQsSUFDQXpFLEVBQVd3QixLQUFLbUQsTUFBTUYsR0FFOUIsQ0FBRSxNQUFPRyxHQUNUNUUsRUFBV3dCLEtBQUttRCxNQUFNckQsYUFBYW9ELFFBQVEsZUFDL0MsQ0FFSixDRXNCSUcsR0FDQXpFLElBQ0F1QixJQUNBeUIsR0FBZSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2dldC1kYXRlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9hZGQtdG8tZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3JlbmRlci10by1kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbG9jYWwtc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZWRpdC1kZWxldGUtdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKSB7XG4gICAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBsZXQgZGF5ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpO1xuICAgIGxldCBtb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIGxldCB5ZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcblxuICAgIGlmIChkYXk8MTApIHtcbiAgICAgICAgZGF5ID0gJzAnICsgZGF5O1xuICAgIH1cbiAgICBpZiAobW9udGggPCAxMCkge1xuICAgICAgICBtb250aCA9ICcwJyArIGRheTtcbiAgICB9XG5cbiAgICBsZXQgZm9ybWF0dGVkRGF0ZSA9IGAke2RheX0vJHttb250aH0vJHt5ZWFyfWA7XG4gICAgcmV0dXJuIGZvcm1hdHRlZERhdGVcbn1cblxuZXhwb3J0IHtnZXRDdXJyZW50RGF0ZX07IiwiY2xhc3MgVG9Eb0l0ZW0ge1xuICAgIGNvbnN0cnVjdG9yIChsaXN0SXRlbSwgZGF0ZSwgZGF0YUluZGV4KSB7XG4gICAgICAgIHRoaXMubGlzdEl0ZW0gPSBsaXN0SXRlbTtcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICAgICAgdGhpcy5kYXRhSW5kZXggPSBkYXRhSW5kZXg7XG4gICAgfVxufVxuXG5sZXQgZXhhbXBsZVRvRG8xID0gbmV3IFRvRG9JdGVtKCdFeGFtcGxlIFRvLURvJywgJzIwMjMtMTAtMTQnLCAnMCcpXG5sZXQgZXhhbXBsZVRvRG8yID0gbmV3IFRvRG9JdGVtKCdFeGFtcGxlIFRvLURvIDInLCAnMjAyMy0xMC0xNScsICcxJylcblxubGV0IHRvRG9MaXN0ID0gW2V4YW1wbGVUb0RvMSwgZXhhbXBsZVRvRG8yXTtcblxuY29uc3QgYWRkVG9Eb09iamVjdCA9IGZ1bmN0aW9uKGRhdGFJbmRleCkge1xuICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYWRkLXRvLWRvLWlucHV0W2RhdGEtaW5kZXg9XCIke2RhdGFJbmRleH1cIl1gKTtcbiAgICBjb25zdCBkYXRlRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYWRkLXRvLWRvLWRhdGVbZGF0YS1pbmRleD1cIiR7ZGF0YUluZGV4fVwiXWApO1xuICAgIGxldCB0b0RvSXRlbSA9IGlucHV0RmllbGQudmFsdWU7XG4gICAgbGV0IHRvRG9EYXRlID0gZGF0ZUZpZWxkLnZhbHVlO1xuICAgIGxldCB0b0RvRGF0YUluZGV4ID0gdG9Eb0xpc3QubGVuZ3RoO1xuICAgIGxldCBuZXdUb0RvID0gbmV3IFRvRG9JdGVtKHRvRG9JdGVtLCB0b0RvRGF0ZSwgdG9Eb0RhdGFJbmRleCk7XG4gICAgdG9Eb0xpc3QucHVzaChuZXdUb0RvICk7XG59XG5cbmNvbnN0IGVkaXRUb0RvT2JqZWN0ID0gZnVuY3Rpb24oZGF0YUluZGV4TnVtKSB7XG4gICAgY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hZGQtdG8tZG8taW5wdXRbZGF0YS1pbmRleD1cIiR7ZGF0YUluZGV4TnVtfVwiXWApO1xuICAgIGNvbnN0IGRhdGVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hZGQtdG8tZG8tZGF0ZVtkYXRhLWluZGV4PVwiJHtkYXRhSW5kZXhOdW19XCJdYCk7XG4gICAgdG9Eb0xpc3RbZGF0YUluZGV4TnVtXS5saXN0SXRlbSA9IGlucHV0RmllbGQudmFsdWU7XG4gICAgdG9Eb0xpc3RbZGF0YUluZGV4TnVtXS5kYXRlID0gZGF0ZUZpZWxkLnZhbHVlO1xuICAgIHRvRG9MaXN0W2RhdGFJbmRleE51bV0uZGF0YUluZGV4ID0gYCR7ZGF0YUluZGV4TnVtfWA7XG5cblxufVxuXG5leHBvcnQge3RvRG9MaXN0LCBhZGRUb0RvT2JqZWN0LCBlZGl0VG9Eb09iamVjdH07IiwiaW1wb3J0IHsgZ2V0Q3VycmVudERhdGUgfSBmcm9tIFwiLi9nZXQtZGF0ZVwiO1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi9hZGQtdG8tZG9cIjtcblxuY29uc3QgZnVsbFRvRG9MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbXMnKTtcblxubGV0IHJlbmRlclRvRG8gPSBmdW5jdGlvbigpIHtcbiAgICBcbiAgICBmb3IgKGxldCBpPTA7IGk8dG9Eb0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbGlzdEl0ZW0uY2xhc3NMaXN0LmFkZCgnbGlzdC1pdGVtJyk7XG4gICAgICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdG8tZG8nKTtcbiAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7aX1gKTtcbiAgICAgICAgZnVsbFRvRG9MaXN0LmFwcGVuZENoaWxkKGxpc3RJdGVtKTtcblxuICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveCcpO1xuICAgICAgICBsaXN0SXRlbS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG5cbiAgICAgICAgY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBpbnB1dEZpZWxkLmNsYXNzTGlzdC5hZGQoJ3RvLWRvLWlucHV0Jyk7XG4gICAgICAgIGlucHV0RmllbGQuc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7aX1gKTtcbiAgICAgICAgaW5wdXRGaWVsZC5pbm5lckhUTUwgPSB0b0RvTGlzdFtpXS5saXN0SXRlbTtcbiAgICAgICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQoaW5wdXRGaWVsZCk7XG5cbiAgICAgICAgY29uc3QgaWNvbkJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBpY29uQm94LmNsYXNzTGlzdC5hZGQoJ2ljb24tYm94Jyk7XG4gICAgICAgIGxpc3RJdGVtLmFwcGVuZENoaWxkKGljb25Cb3gpO1xuXG4gICAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGRhdGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdkYXRlLWlucHV0Jyk7XG4gICAgICAgIGRhdGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7aX1gKTtcbiAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0gdG9Eb0xpc3RbaV0uZGF0ZTtcbiAgICAgICAgaWNvbkJveC5hcHBlbmRDaGlsZChkYXRlSW5wdXQpO1xuXG4gICAgICAgIGNvbnN0IHN2Z0VkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgICAgICBzdmdFZGl0LmNsYXNzTGlzdC5hZGQoJ2VkaXQtc3ZnJyk7XG4gICAgICAgIHN2Z0VkaXQuc2V0QXR0cmlidXRlKCd4bWxucycsICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycpO1xuICAgICAgICBzdmdFZGl0LnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgMjQgMjQnKTtcbiAgICAgICAgc3ZnRWRpdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBgJHtpfWApO1xuICAgICAgICBzdmdFZGl0LmlubmVySFRNTCA9IFwiPHRpdGxlPnBlbmNpbDwvdGl0bGU+PHBhdGggZD0nTTIwLjcxLDcuMDRDMjEuMSw2LjY1IDIxLjEsNiAyMC43MSw1LjYzTDE4LjM3LDMuMjlDMTgsMi45IDE3LjM1LDIuOSAxNi45NiwzLjI5TDE1LjEyLDUuMTJMMTguODcsOC44N00zLDE3LjI1VjIxSDYuNzVMMTcuODEsOS45M0wxNC4wNiw2LjE4TDMsMTcuMjVaJyAvPlwiO1xuICAgICAgICBpY29uQm94LmFwcGVuZENoaWxkKHN2Z0VkaXQpO1xuXG4gICAgICAgIGNvbnN0IHN2Z0RlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gICAgICAgIHN2Z0RlbGV0ZS5jbGFzc0xpc3QuYWRkKCdkZWxldGUtc3ZnJyk7XG4gICAgICAgIHN2Z0RlbGV0ZS5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyk7XG4gICAgICAgIHN2Z0RlbGV0ZS5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDI0IDI0Jyk7XG4gICAgICAgIHN2Z0RlbGV0ZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBgJHtpfWApO1xuICAgICAgICBzdmdEZWxldGUuaW5uZXJIVE1MID0gXCI8dGl0bGU+dHJhc2gtY2FuLW91dGxpbmU8L3RpdGxlPjxwYXRoIGQ9J005LDNWNEg0VjZINVYxOUEyLDIgMCAwLDAgNywyMUgxN0EyLDIgMCAwLDAgMTksMTlWNkgyMFY0SDE1VjNIOU03LDZIMTdWMTlIN1Y2TTksOFYxN0gxMVY4SDlNMTMsOFYxN0gxNVY4SDEzWicgLz5cIlxuICAgICAgICBpY29uQm94LmFwcGVuZENoaWxkKHN2Z0RlbGV0ZSk7XG5cblxuICAgIH1cbiAgICBcbn1cblxubGV0IHJlbmRlckFkZFRvRG8gPSBmdW5jdGlvbiAoZGF0YUluZGV4KSB7XG4gICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKCdsaXN0LWl0ZW0nKTtcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKCdhZGQtdG8tZG8tbW9kYWwnKVxuICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIGAke2RhdGFJbmRleH1gKTtcbiAgICBmdWxsVG9Eb0xpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xuXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94Jyk7XG4gICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuXG4gICAgY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXRGaWVsZC5jbGFzc0xpc3QuYWRkKCd0by1kby1pbnB1dCcpO1xuICAgIGlucHV0RmllbGQuY2xhc3NMaXN0LmFkZCgnYWRkLXRvLWRvLWlucHV0JylcbiAgICBpbnB1dEZpZWxkLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ1doYXQgRG8gWW91IE5lZWQgdG8gRG8/Jyk7XG4gICAgaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBgJHtkYXRhSW5kZXh9YCk7XG4gICAgLy8gaW5wdXRGaWVsZC52YWx1ZSA9IFwiV2hhdCBEbyBZb3UgTmVlZCB0byBEbz9cIjtcbiAgICBsaXN0SXRlbS5hcHBlbmRDaGlsZChpbnB1dEZpZWxkKTtcblxuICAgIGNvbnN0IGljb25Cb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpY29uQm94LmNsYXNzTGlzdC5hZGQoJ2ljb24tYm94Jyk7XG4gICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQoaWNvbkJveCk7XG5cbiAgICBjb25zdCBkYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGRhdGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdkYXRlLWlucHV0Jyk7XG4gICAgZGF0ZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2FkZC10by1kby1kYXRlJylcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7ZGF0YUluZGV4fWApO1xuICAgIGRhdGVJbnB1dC52YWx1ZSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgaWNvbkJveC5hcHBlbmRDaGlsZChkYXRlSW5wdXQpO1xuXG4gICAgY29uc3QgYWRkVG9Eb0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGFkZFRvRG9CdG4uY2xhc3NMaXN0LmFkZCgnc3VibWl0LWJ1dHRvbicpO1xuICAgIGFkZFRvRG9CdG4uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3N1Ym1pdCcpO1xuICAgIGFkZFRvRG9CdG4uc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7ZGF0YUluZGV4fWApO1xuICAgIGFkZFRvRG9CdG4uc2V0QXR0cmlidXRlKCdpZCcsICd0by1kby1zdWJtaXQnKVxuICAgIGFkZFRvRG9CdG4uaW5uZXJIVE1MID0gJ1N1Ym1pdCc7XG4gICAgaWNvbkJveC5hcHBlbmRDaGlsZChhZGRUb0RvQnRuKTtcblxuICAgIGNvbnN0IGFkZENhbmNlbFRvRG9CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBhZGRDYW5jZWxUb0RvQnRuLmNsYXNzTGlzdC5hZGQoJ2NhbmNlbC1idXR0b24nKTtcbiAgICBhZGRDYW5jZWxUb0RvQnRuLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICBhZGRDYW5jZWxUb0RvQnRuLnNldEF0dHJpYnV0ZSgnaWQnLCAndG8tZG8tY2FuY2VsJylcbiAgICBhZGRDYW5jZWxUb0RvQnRuLmlubmVySFRNTCA9ICdDYW5jZWwnO1xuICAgIGljb25Cb3guYXBwZW5kQ2hpbGQoYWRkQ2FuY2VsVG9Eb0J0bik7XG4gICAgXG59XG5cbmxldCBlZGl0VG9Eb0l0ZW0gPSBmdW5jdGlvbiAoZWRpdE5vZGUsIGRhdGFJbmRleCkge1xuICAgIGVkaXROb2RlLmNsYXNzTGlzdC5hZGQoJ2xpc3QtaXRlbScpO1xuICAgIGVkaXROb2RlLmNsYXNzTGlzdC5hZGQoJ2FkZC10by1kby1tb2RhbCcpXG4gICAgZWRpdE5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7ZGF0YUluZGV4fWApO1xuXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94Jyk7XG4gICAgXG4gICAgZWRpdE5vZGUuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuXG4gICAgY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXRGaWVsZC5jbGFzc0xpc3QuYWRkKCd0by1kby1pbnB1dCcpO1xuICAgIGlucHV0RmllbGQuY2xhc3NMaXN0LmFkZCgnYWRkLXRvLWRvLWlucHV0JylcbiAgICBpbnB1dEZpZWxkLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ1doYXQgRG8gWW91IE5lZWQgdG8gRG8/Jyk7XG4gICAgaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBgJHtkYXRhSW5kZXh9YCk7XG4gICAgLy8gaW5wdXRGaWVsZC52YWx1ZSA9IFwiV2hhdCBEbyBZb3UgTmVlZCB0byBEbz9cIjtcbiAgICBlZGl0Tm9kZS5hcHBlbmRDaGlsZChpbnB1dEZpZWxkKTtcblxuICAgIGNvbnN0IGljb25Cb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpY29uQm94LmNsYXNzTGlzdC5hZGQoJ2ljb24tYm94Jyk7XG4gICAgZWRpdE5vZGUuYXBwZW5kQ2hpbGQoaWNvbkJveCk7XG5cbiAgICBjb25zdCBkYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGRhdGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdkYXRlLWlucHV0Jyk7XG4gICAgZGF0ZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2FkZC10by1kby1kYXRlJylcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7ZGF0YUluZGV4fWApO1xuICAgIGRhdGVJbnB1dC52YWx1ZSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgaWNvbkJveC5hcHBlbmRDaGlsZChkYXRlSW5wdXQpO1xuXG4gICAgY29uc3QgYWRkVG9Eb0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGFkZFRvRG9CdG4uY2xhc3NMaXN0LmFkZCgnc3VibWl0LWJ1dHRvbicpO1xuICAgIGFkZFRvRG9CdG4uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3N1Ym1pdCcpO1xuICAgIGFkZFRvRG9CdG4uc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgYCR7ZGF0YUluZGV4fWApO1xuICAgIGFkZFRvRG9CdG4uc2V0QXR0cmlidXRlKCdpZCcsICd0by1kby1zdWJtaXQnKVxuICAgIGFkZFRvRG9CdG4uaW5uZXJIVE1MID0gJ1N1Ym1pdCc7XG4gICAgaWNvbkJveC5hcHBlbmRDaGlsZChhZGRUb0RvQnRuKTtcblxuICAgIGNvbnN0IGFkZENhbmNlbFRvRG9CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBhZGRDYW5jZWxUb0RvQnRuLmNsYXNzTGlzdC5hZGQoJ2NhbmNlbC1idXR0b24nKTtcbiAgICBhZGRDYW5jZWxUb0RvQnRuLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICBhZGRDYW5jZWxUb0RvQnRuLnNldEF0dHJpYnV0ZSgnaWQnLCAndG8tZG8tY2FuY2VsJylcbiAgICBhZGRDYW5jZWxUb0RvQnRuLmlubmVySFRNTCA9ICdDYW5jZWwnO1xuICAgIGljb25Cb3guYXBwZW5kQ2hpbGQoYWRkQ2FuY2VsVG9Eb0J0bik7XG4gICAgXG59XG5cbmV4cG9ydCB7cmVuZGVyVG9EbywgcmVuZGVyQWRkVG9EbywgZWRpdFRvRG9JdGVtfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL2FkZC10by1kb1wiXG5cbmNvbnN0IHBvcHVsYXRlU3RvcmFnZSA9IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb0xpc3RBcnJcIiwgSlNPTi5zdHJpbmdpZnkodG9Eb0xpc3QpKTtcbn1cblxuXG5cbmNvbnN0IGdldFN0b3JhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBpc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSA9IHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnO1xuICAgIFxuICAgIGlmIChpc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RvcmVkRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9Eb0xpc3RBcnJcIik7XG4gICAgICAgICAgICBpZiAoc3RvcmVkRGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRvRG9MaXN0ID0gSlNPTi5wYXJzZShzdG9yZWREYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0b0RvTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b0RvTGlzdEFyclwiKSk7XG4gICAgfVxufVxufVxuXG5leHBvcnQge3BvcHVsYXRlU3RvcmFnZSwgZ2V0U3RvcmFnZX07IiwiaW1wb3J0IHsgcmVuZGVyVG9EbywgcmVuZGVyQWRkVG9EbywgZWRpdFRvRG9JdGVtIH0gZnJvbSBcIi4vcmVuZGVyLXRvLWRvXCI7XG5pbXBvcnQgeyBhZGRUb0RvT2JqZWN0LCB0b0RvTGlzdCwgZWRpdFRvRG9PYmplY3QgfSBmcm9tIFwiLi9hZGQtdG8tZG9cIjtcbmltcG9ydCB7IHRvRG9MaXN0TGVuZ3RoIH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IGdldFN0b3JhZ2UsIHBvcHVsYXRlU3RvcmFnZSB9IGZyb20gXCIuL2xvY2FsLXN0b3JhZ2VcIjtcblxuY29uc3QgbGlzdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbXMnKTtcblxuY29uc3QgZWRpdFRvRG8gPSBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXN2ZycpKSB7XG4gICAgICAgIGNvbnN0IHN2Z0J0biA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IHN2Z0J0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnKTtcbiAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZnVsbC10by1kb1tkYXRhLWluZGV4PVwiJHtsaXN0TnVtYmVyfVwiXWApO1xuICAgICAgICBjb25zdCBlZGl0TW9kdWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxpc3RJdGVtcy5yZXBsYWNlQ2hpbGQoZWRpdE1vZHVsZSwgbGlzdEl0ZW0pO1xuICAgICAgICBlZGl0VG9Eb0l0ZW0oZWRpdE1vZHVsZSwgbGlzdE51bWJlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0KVxuICAgIH1cbn1cblxuY29uc3QgZWRpdEJ1dHRvbkRPTSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBlZGl0U1ZHID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQtc3ZnJyk7XG4gICAgZWRpdFNWRy5mb3JFYWNoKCAoZWRpdEJ0bikgPT4ge1xuICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnSGVsbG8nKVxuICAgICAgICBlZGl0VG9EbyhlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0hlbGxvIEFnYWluJylcbiAgICAgICAgY29uc3Qgc3VibWl0VG9EbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0LWJ1dHRvblwiKTtcbiAgICAgICAgY29uc3QgY2FuY2VsVG9EbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnV0dG9uJyk7XG4gICAgICAgIGNvbnN0IGFkZFRvRG9Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG8tZG8tbW9kYWwnKTtcbiAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IGFkZFRvRG9Nb2RhbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnKTtcbiAgICAgICAgc3VibWl0VG9Eby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlZGl0VG9Eb09iamVjdChsaXN0TnVtYmVyKTtcbiAgICAgICAgICAgIGxpc3RJdGVtcy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xuICAgICAgICAgICAgcmVuZGVyVG9EbygpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codG9Eb0xpc3QpO1xuICAgICAgICAgICAgZWRpdEJ1dHRvbkRPTSgpO1xuICAgICAgICAgICAgZGVsZXRlVG9Eb0RPTSgpO1xuICAgICAgICB9KVxuICAgICAgICBjYW5jZWxUb0RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGxpc3RJdGVtcy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHJlbmRlclRvRG8oKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0KTtcbiAgICAgICAgICAgIGVkaXRCdXR0b25ET00oKTtcbiAgICAgICAgICAgIGRlbGV0ZVRvRG9ET00oKTtcbiAgICAgICAgfSlcbiAgICB9IClcbn0pXG59XG5cbmNvbnN0IGRlbGV0ZVRvRG8gPSBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGUtc3ZnJykpIHtcbiAgICAgICAgY29uc3Qgc3ZnQnRuID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gc3ZnQnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcpO1xuICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5mdWxsLXRvLWRvW2RhdGEtaW5kZXg9XCIke2xpc3ROdW1iZXJ9XCJdYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGxpc3ROdW1iZXIpO1xuICAgICAgICB0b0RvTGlzdC5zcGxpY2UobGlzdE51bWJlciwgMSk7XG4gICAgfVxufVxuXG5jb25zdCBkZWxldGVUb0RvRE9NID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgZGVsZXRlU1ZHID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRlbGV0ZS1zdmcnKTtcbiAgICBkZWxldGVTVkcuZm9yRWFjaCggKGRlbGV0ZUJ0bikgPT4ge1xuICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlVG9EbyhlKTtcbiAgICAgICAgICAgIGxpc3RJdGVtcy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xuICAgICAgICAgICAgcmVuZGVyVG9EbygpO1xuICAgICAgICAgICAgZWRpdEJ1dHRvbkRPTSgpO1xuICAgICAgICAgICAgZGVsZXRlVG9Eb0RPTSgpO1xuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmV4cG9ydCB7ZWRpdFRvRG8sIGVkaXRCdXR0b25ET00sIGRlbGV0ZVRvRG9ET019OyIsImltcG9ydCB7IHJlbmRlclRvRG8sIHJlbmRlckFkZFRvRG8gfSBmcm9tIFwiLi9yZW5kZXItdG8tZG9cIjtcbmltcG9ydCB7IHRvRG9MaXN0LCBhZGRUb0RvT2JqZWN0IH0gZnJvbSBcIi4vYWRkLXRvLWRvXCI7XG5pbXBvcnQgeyBkZWxldGVUb0RvRE9NLCBlZGl0QnV0dG9uRE9NIH0gZnJvbSBcIi4vZWRpdC1kZWxldGUtdG9kb1wiO1xuaW1wb3J0IHsgcG9wdWxhdGVTdG9yYWdlLCBnZXRTdG9yYWdlIH0gZnJvbSBcIi4vbG9jYWwtc3RvcmFnZVwiO1xuXG5jb25zdCBwcm9qZWN0RGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWFkZGl0aW9uXCIpO1xuY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtcHJvamVjdC1idXR0b24nKTtcblxuYWRkUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgcHJvamVjdERpYWxvZy5zaG93TW9kYWwoKTtcbn0pXG5cbmNvbnN0IGFkZFRvRG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWl0ZW0tanMnKTtcbmNvbnN0IGxpc3RJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW1zJyk7XG5cblxubGV0IHRvRG9MaXN0TGVuZ3RoID0gdG9Eb0xpc3QubGVuZ3RoO1xuXG5cbmFkZFRvRG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PiB7XG4gICAgcmVuZGVyQWRkVG9Ebyh0b0RvTGlzdExlbmd0aCk7XG4gICAgY29uc3QgYWRkVG9Eb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdG8tZG8taW5wdXRcIik7XG4gICAgY29uc3Qgc3VibWl0VG9EbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0LWJ1dHRvblwiKTtcbiAgICBjb25zdCBjYW5jZWxUb0RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbmNlbC1idXR0b24nKTtcbiAgICBjb25zdCBhZGRUb0RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvLWRvLW1vZGFsJyk7XG4gICAgYWRkVG9Eb0lucHV0LmZvY3VzKCk7XG4gICAgc3VibWl0VG9Eby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGFkZFRvRG9PYmplY3QodG9Eb0xpc3RMZW5ndGgpO1xuICAgICAgICBsaXN0SXRlbXMuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHJlbmRlclRvRG8oKTtcbiAgICAgICAgcG9wdWxhdGVTdG9yYWdlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0KTtcbiAgICAgICAgZWRpdEJ1dHRvbkRPTSgpO1xuICAgICAgICBkZWxldGVUb0RvRE9NKCk7XG4gICAgfSlcbiAgICBjYW5jZWxUb0RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgbGlzdEl0ZW1zLnJlbW92ZUNoaWxkKGFkZFRvRG9Nb2RhbCk7XG4gICAgICAgIGVkaXRCdXR0b25ET00oKTtcbiAgICAgICAgZGVsZXRlVG9Eb0RPTSgpO1xuICAgIH0pXG59KVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiB7XG4gICAgZ2V0U3RvcmFnZSgpO1xuICAgIHJlbmRlclRvRG8oKTtcbiAgICBlZGl0QnV0dG9uRE9NKCk7XG4gICAgZGVsZXRlVG9Eb0RPTSgpO1xufSlcblxuXG5cblxuZXhwb3J0IHt0b0RvTGlzdExlbmd0aH0iXSwibmFtZXMiOlsiZ2V0Q3VycmVudERhdGUiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJkYXkiLCJnZXREYXRlIiwibW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiVG9Eb0l0ZW0iLCJjb25zdHJ1Y3RvciIsImxpc3RJdGVtIiwiZGF0ZSIsImRhdGFJbmRleCIsInRoaXMiLCJ0b0RvTGlzdCIsImZ1bGxUb0RvTGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbmRlclRvRG8iLCJpIiwibGVuZ3RoIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiY2hlY2tib3giLCJpbnB1dEZpZWxkIiwiaW5uZXJIVE1MIiwiaWNvbkJveCIsImRhdGVJbnB1dCIsInZhbHVlIiwic3ZnRWRpdCIsImNyZWF0ZUVsZW1lbnROUyIsInN2Z0RlbGV0ZSIsInBvcHVsYXRlU3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwibGlzdEl0ZW1zIiwiZWRpdEJ1dHRvbkRPTSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWRpdEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29uc29sZSIsImxvZyIsImV2ZW50IiwidGFyZ2V0IiwiY29udGFpbnMiLCJsaXN0TnVtYmVyIiwiZ2V0QXR0cmlidXRlIiwiZWRpdE1vZHVsZSIsInJlcGxhY2VDaGlsZCIsImVkaXROb2RlIiwiYWRkVG9Eb0J0biIsImFkZENhbmNlbFRvRG9CdG4iLCJlZGl0VG9Eb0l0ZW0iLCJlZGl0VG9EbyIsInN1Ym1pdFRvRG8iLCJjYW5jZWxUb0RvIiwiZGF0YUluZGV4TnVtIiwiZGF0ZUZpZWxkIiwiZWRpdFRvRG9PYmplY3QiLCJkZWxldGVUb0RvRE9NIiwiZGVsZXRlQnRuIiwic3BsaWNlIiwiZGVsZXRlVG9EbyIsInByb2plY3REaWFsb2ciLCJnZXRFbGVtZW50QnlJZCIsInNob3dNb2RhbCIsImFkZFRvRG8iLCJ0b0RvTGlzdExlbmd0aCIsInJlbmRlckFkZFRvRG8iLCJhZGRUb0RvSW5wdXQiLCJhZGRUb0RvTW9kYWwiLCJmb2N1cyIsInRvRG9JdGVtIiwidG9Eb0RhdGUiLCJ0b0RvRGF0YUluZGV4IiwibmV3VG9EbyIsInB1c2giLCJhZGRUb0RvT2JqZWN0IiwicmVtb3ZlQ2hpbGQiLCJ3aW5kb3ciLCJzdG9yZWREYXRhIiwiZ2V0SXRlbSIsInBhcnNlIiwiZXJyb3IiLCJnZXRTdG9yYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==